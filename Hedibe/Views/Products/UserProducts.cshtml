@model IEnumerable<Hedibe.Entities.Product>
@{
    ViewData["Title"] = "UserProducts";

    Pager pager = new Pager();
    int pageNumber = 0;
    if (ViewBag.Pager != null)
    {
        pager = ViewBag.Pager;
        pageNumber = pager.CurrentPage;
    }
}
<section class="flex-grow-1 products_background">
    <div class="d-flex justify-content-between forest_background px-4 pt-4 flex-column flex-sm-row">
        <h1 class="font-dancing-script m-0">- @ViewData["Title"] -</h1>
        @if (ViewBag.AddInfo is not null)
        {
            if (ViewBag.AddInfo.Substring(0, 1) == "S")
            {
                <h2 class="font-dancing-script d-flex align-items-center justify-content-center text-success"><span class="iconify" data-icon="akar-icons:circle-check-fill"></span> @ViewBag.AddInfo 😊</h2>
            }

            if (ViewBag.AddInfo.Substring(0, 1) == "F")
            {
                <h2 class="font-dancing-script d-flex align-items-center justify-content-center text-danger"><span class="iconify" data-icon="akar-icons:circle-check-fill"></span> @ViewBag.AddInfo 😔</h2>
            }
        }
        <h2 class="m-0">🍒🍎🍓🥬🥦</h2>
    </div>
    <div class="d-flex justify-content-between px-4 flex-column flex-sm-row">
        <form class="form-inline my-2 my-lg-0 flex-nowrap" asp-action="Search" asp-route-redirect="@ViewData["redirect"]">
            <a class=" text-black-50 my-2 my-sm-0 mx-2" type="submit" asp-action="Search" asp-route-redirect="@ViewData["redirect"]" asp-route-reset="@true">
                <span class="iconify" data-icon="bi:x-square-fill" data-width="32" data-height="32"></span>
            </a>
            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search" value="@ViewBag.SearchString" name="SearchString">
            <button class="btn btn-outline-dark my-2 my-sm-0" type="submit">Search</button>
        </form>
        <a class="nav-link text-dark d-flex align-items-center p-0" asp-controller="Products" asp-action="Add"><span class=" mx-2 iconify" data-icon="akar-icons:circle-plus-fill"></span> Add your own products!</a>
    </div>
    <div>

    </div>
    <div class="table-responsive table-dark background_darken mb-2">
        <table class="table text-center">
            <thead>
                <tr>
                    <th class="p-1" scope="col" style="width: 24%">
                        <a class="font-dancing-script font-size-md text-dark" asp-action="Sort" asp-route-redirect="@ViewData["redirect"]" asp-route-sort="Name"> @Html.DisplayNameFor(model => model.Name) </a>
                    </th>
                    <th class="p-1" scope="col" style="width: 16%">
                        <a class="font-dancing-script font-size-md text-dark" asp-action="Sort" asp-route-redirect="@ViewData["redirect"]" asp-route-sort="Calories"> @Html.DisplayNameFor(model => model.Calories) </a>
                    </th>
                    <th class="p-1" scope="col" style="width: 16%">
                        <a class="font-dancing-script font-size-md text-dark" asp-action="Sort" asp-route-redirect="@ViewData["redirect"]" asp-route-sort="TotalFat"> @Html.DisplayNameFor(model => model.TotalFat) </a>
                    </th>
                    <th class="p-1" scope="col" style="width: 16%">
                        <a class="font-dancing-script font-size-md text-dark" asp-action="Sort" asp-route-redirect="@ViewData["redirect"]" asp-route-sort="Protein"> @Html.DisplayNameFor(model => model.Protein) </a>
                    </th>
                    <th class="p-1" scope="col" style="width: 16%">
                        <a class="font-dancing-script font-size-md text-dark" asp-action="Sort" asp-route-redirect="@ViewData["redirect"]" asp-route-sort="Carbohydrate"> @Html.DisplayNameFor(model => model.Carbohydrate) </a>
                    </th>
                    <th class="p-1" scope="col" style="width: 7%">
                        <p class="font-dancing-script font-size-md text-dark m-0">Edit</p>
                    </th>
                    <th class="p-1" scope="col" style="width: 7%">
                        <p class="font-dancing-script font-size-md text-dark m-0">Delete</p>
                    </th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td class="font-weight-bold">
                            @Html.DisplayFor(model => item.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(model => item.Calories)
                        </td>
                        <td>
                            @Html.DisplayFor(model => item.TotalFat)
                        </td>
                        <td>
                            @Html.DisplayFor(model => item.Protein)
                        </td>
                        <td>
                            @Html.DisplayFor(model => item.Carbohydrate)
                        </td>

                        <td>
                            <a class="px-2 text-dark btn-clear" asp-action="Edit" asp-route-id="@item.Id" asp-route-redirect="@ViewData["redirect"]" asp-route-page="@pager.CurrentPage">
                                <span class="iconify verify-hover-success" data-icon="bx:bxs-edit" data-width="26" data-height="26"></span>
                            </a>
                        </td>
                        <td>
                            <a class="px-2 text-dark btn-clear" asp-action="Delete" asp-route-id="@item.Id" asp-route-redirect="@ViewData["redirect"]" asp-route-page="@pager.CurrentPage">
                                <span class="iconify verify-hover-danger" data-icon="fluent:delete-off-24-filled" data-width="26" data-height="26"></span>
                            </a>
                        </td>
                    </tr>
                }

            </tbody>
        </table>
    </div>
    <div>
        <partial name="_pager" model="@pager" view-data="ViewData" />
    </div>

</section>



