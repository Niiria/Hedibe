@using Hedibe.Services
@inject IUserContextService _userContextService

<nav class="navbar background-animated bg-white navbar-expand-sm navbar-toggleable-sm navbar-light border-bottom shadow ">
    <div class="container-fluid m-0 ">
        <a class="mr-2 text-dark" asp-area="" asp-controller="Home" asp-action="Index">
            @if (ViewContext.HttpContext.Request.Path == "/")
            {
                <img width="48" src="~/assets/Homepage_active.png" alt="home">
            }
            else
            {
                <img width="48" src="~/assets/Homepage.png" alt="home">
            }
        </a>
        <a class="navbar-brand m-0 " asp-area="" asp-controller="Home" asp-action="Index"><img src="~/assets/Logo.png" alt="Logo" width="150" /> </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse collapse d-sm-inline-flex justify-content-end">
            <ul class="navbar-nav d-flex align-items-center justify-content-end flex-wrap ">
                @{
                    if (_userContextService.CheckLoggedUser())
                    {
                        @if (_userContextService.GetRole() == "Admin" || _userContextService.GetRole() == "Mod")
                        {
                            <li>
                                <a class="nav-link text-dark d-flex align-items-center" asp-area="" asp-controller="Panel" asp-action="Dashboard">
                                    <span class="iconify" data-icon="clarity:dashboard-solid"></span>
                                    Dashboard
                                </a>
                            </li>
                        }
                        <li class="dropdown">
                            <button class="nav-link btn-clear text-dark d-flex align-items-center" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="iconify" data-icon="fluent:food-24-filled"></span>
                                Meals
                            </button>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                                <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Index">Catalog</a>
                                <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Index">User meals</a>
                                <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Index">Create meal</a>
                            </div>
                        </li>
                        <li class="dropdown">
                            <button class="nav-link btn-clear text-dark d-flex align-items-center" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="iconify mx-1" data-icon="fa-solid:clipboard-list"></span>
                                Shopping list
                            </button>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                                <a class="nav-link text-dark" asp-area="" asp-controller="Products" asp-action="Index">Products</a>
                                <a class="nav-link text-dark" asp-area="" asp-controller="ShoppingList" asp-action="Add">New list</a>
                                <a class="nav-link text-dark" asp-area="" asp-controller="Products" asp-action="Add">New product</a>
                                <a class="nav-link text-dark" asp-area="" asp-controller="ShoppingList" asp-action="Index">User lists</a>
                                <a class="nav-link text-dark" asp-area="" asp-controller="Products" asp-action="Index">User products</a>
                            </div>
                        </li>
                        <li class="dropdown">
                            <button class="nav-link btn-clear text-dark d-flex align-items-center" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="iconify" data-icon="bx:bxs-user-circle"></span>
                                @_userContextService.GetUsername()
                            </button>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                                <a class="nav-link text-dark" asp-area="" asp-controller="Account" asp-action="Logout">Theme</a>
                                <a class="nav-link text-dark" asp-area="" asp-controller="Account" asp-action="Logout">Help</a>
                                <a class="nav-link text-dark d-flex align-items-center justify-content-center m-auto " asp-area="" asp-controller="Account" asp-action="Logout">
                                    Logout
                                    <span class="iconify" data-icon="ri:logout-box-r-line"></span>
                                </a>
                            </div>
                        </li>
                    }
                    else
                    {
                        <li class="nav-item ">
                            <a class="nav-link text-dark" asp-area="" asp-controller="Account" asp-action="Login">Login</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" asp-area="" asp-controller="Account" asp-action="Register">Register</a>
                        </li>

                    }
                }
            </ul>
        </div>
    </div>
</nav>



@section scripts{
    <script>
        $(document).ready(function() {
            $('li.active').removeClass('active');
            $('a[href="' + location.pathname + '"]').closest('li').addClass('active');
        });
    </script>
}